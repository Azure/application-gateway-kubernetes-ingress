<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Helm Values Configuration Options - Application Gateway Ingress Controller</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../docs/css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Helm Values Configuration Options";
        var mkdocs_page_input_path = "helm-values-documenation.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Application Gateway Ingress Controller
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../annotations/">Annotations</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Helm Values Configuration Options</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#available-options">Available options</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example">Example</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#run-without-root">Run without root</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#run-with-read-only-root-filesystem">Run with read-only root filesystem</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ingress-v1/">Ingress V1 Support</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../setup/install/">Install</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial.e2e-ssl/">Tutorial: Setting up E2E SSL</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial.general/">Tutorial: Basic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../features/agic-reconcile/">Agic reconcile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../features/appgw-ssl-certificate/">Appgw ssl certificate</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../features/cookie-affinity/">Cookie affinity</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../features/custom-ingress-class/">Custom Ingress Class</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../features/multiple-namespaces/">Multiple Namespace Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../features/private-ip/">Using Private IP for internal routing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../features/probes/">Probes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../features/rewrite-rule-set-custom-resource/">Rewrite rule set custom resource</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">How tos</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../how-tos/continuous-deployment/">Continuous Deployment with AKS and AGIC using Azure Pipelines</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how-tos/deploy-AGIC-with-Workload-Identity-using-helm/">How to deploy AGIC via Helm using Workload Identity</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how-tos/dns/">Automate DNS updates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how-tos/helm-upgrade/">Upgrading AGIC using Helm</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how-tos/lets-encrypt/">Certificate issuance with LetsEncrypt.org</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how-tos/minimize-downtime-during-deployments/">Minimizing Downtime During Deployments</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how-tos/networking/">How to setup networking between Application Gateway and AKS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how-tos/prevent-agic-from-overwriting/">Preventing AGIC from removing certain rules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how-tos/scale-applications-using-appgw-metrics/">Scale your Applications using Application Gateway Metrics (Beta)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../how-tos/websockets/">Websockets</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faq/">Frequrently Asked Questions: [WIP]</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Troubleshootings</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../troubleshootings/">Troubleshooting Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../troubleshootings/troubleshooting-agic-addon-identity-not-found/">Troubleshooting agic addon identity not found</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../troubleshootings/troubleshooting-agic-fails-with-aad-pod-identity-breakingchange/">Troubleshooting agic fails with aad pod identity breakingchange</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../troubleshootings/troubleshooting-agic-pod-stuck-in-not-ready-state/">Troubleshooting agic pod stuck in not ready state</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../troubleshootings/troubleshooting-installing-a-simple-application/">Troubleshooting installing a simple application</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../logging-levels/">Logging Levels</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../developers/build/">Building the controller</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../developers/contribute/">Contribution Guidelines</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../developers/design/">Application Gateway Ingress Controller Design (WIP)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../developers/developer-guideline/">Application Gateway Ingress Controller Development Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../developers/nightly/">Install the latest nightly build</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../developers/test/">Testing the controller</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Application Gateway Ingress Controller</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Helm Values Configuration Options</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/Azure/application-gateway-kubernetes-ingress/edit/master/docs/helm-values-documenation.md">Edit on Azure/application-gateway-kubernetes-ingress</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="helm-values-configuration-options">Helm Values Configuration Options</h1>
<blockquote>
<p><strong><em>NOTE:</em></strong> <a href="https://aka.ms/agc">Application Gateway for Containers</a> has been released, which introduces numerous performance, resilience, and feature changes. Please consider leveraging Application Gateway for Containers for your next deployment.</p>
</blockquote>
<h2 id="available-options">Available options</h2>
<table>
<thead>
<tr>
<th>Field</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>verbosityLevel</code></td>
<td>3</td>
<td>Sets the verbosity level of the AGIC logging infrastructure. See <a href="../logging-levels/">Logging Levels</a> for possible values.</td>
</tr>
<tr>
<td><code>reconcilePeriodSeconds</code></td>
<td></td>
<td>Enable periodic reconciliation to checks if the latest gateway configuration is different from what it cached. Range: 30 - 300 seconds. Disabled by default.</td>
</tr>
<tr>
<td><code>appgw.applicationGatewayID</code></td>
<td></td>
<td>Resource Id of the Application Gateway. Example: <code>applicationgatewayd0f0</code></td>
</tr>
<tr>
<td><code>appgw.subscriptionId</code></td>
<td>Default is agent node pool's subscriptionId derived from CloudProvider config</td>
<td>The Azure Subscription ID in which App Gateway resides. Example: <code>a123b234-a3b4-557d-b2df-a0bc12de1234</code></td>
</tr>
<tr>
<td><code>appgw.resourceGroup</code></td>
<td>Default is agent node pool's resource group derived from CloudProvider config</td>
<td>Name of the Azure Resource Group in which App Gateway was created. Example: <code>app-gw-resource-group</code></td>
</tr>
<tr>
<td><code>appgw.name</code></td>
<td></td>
<td>Name of the Application Gateway. Example: <code>applicationgatewayd0f0</code></td>
</tr>
<tr>
<td><code>appgw.environment</code></td>
<td><code>AZUREPUBLICCLOUD</code></td>
<td>Specify which cloud environment. Possbile values: <code>AZURECHINACLOUD</code>, <code>AZUREGERMANCLOUD</code>, <code>AZUREPUBLICCLOUD</code>, <code>AZUREUSGOVERNMENTCLOUD</code></td>
</tr>
<tr>
<td><code>appgw.shared</code></td>
<td>false</td>
<td>This boolean flag should be defaulted to <code>false</code>. Set to <code>true</code> should you need a <a href="../how-tos/prevent-agic-from-overwriting/">Shared App Gateway</a>.</td>
</tr>
<tr>
<td><code>appgw.subResourceNamePrefix</code></td>
<td>No prefix if empty</td>
<td>Prefix that should be used in the naming of the Application Gateway's sub-resources</td>
</tr>
<tr>
<td><code>kubernetes.watchNamespace</code></td>
<td>Watches all if empty</td>
<td>Specify the name space, which AGIC should watch. This could be a single string value, or a comma-separated list of namespaces.</td>
</tr>
<tr>
<td><code>kubernetes.securityContext</code></td>
<td><code>runAsUser: 0</code></td>
<td>Specify the pod security context to use with AGIC deployment. By default, AGIC will assume <code>root</code> permission. Jump to <a href="#run-without-root">Run without root</a> for more information.</td>
</tr>
<tr>
<td><code>kubernetes.containerSecurityContext</code></td>
<td><code>{}</code></td>
<td>Specify the <a href="https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-container">container security context</a> to use with AGIC deployment.</td>
</tr>
<tr>
<td><code>kubernetes.podAnnotations</code></td>
<td><code>{}</code></td>
<td>Specify custom annotations for AGIC pod</td>
</tr>
<tr>
<td><code>kubernetes.resources</code></td>
<td><code>{}</code></td>
<td>Specify <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/">resource quota</a> for AGIC pod</td>
</tr>
<tr>
<td><code>kubernetes.nodeSelector</code></td>
<td><code>{}</code></td>
<td>Scheduling node selector</td>
</tr>
<tr>
<td><code>kubernetes.tolerations</code></td>
<td><code>[]</code></td>
<td>Scheduling tolerations</td>
</tr>
<tr>
<td><code>kubernetes.affinity</code></td>
<td><code>{}</code></td>
<td>Scheduling affinity</td>
</tr>
<tr>
<td><code>kubernetes.volumes.extraVolumes</code></td>
<td><code>{}</code></td>
<td>Specify additional volumes for the AGIC pod. This can be useful when <a href="#run-with-read-only-root-filesystem">running on a <code>readOnlyRootFilesystem</code></a>, as AGIC requires a writeable <code>/tmp</code> directory.</td>
</tr>
<tr>
<td><code>kubernetes.volumes.extraVolumeMounts</code></td>
<td><code>{}</code></td>
<td>Specify additional volume mounts for the AGIC pod. This can be useful when <a href="#run-with-read-only-root-filesystem">running on a <code>readOnlyRootFilesystem</code></a>, as AGIC requires a writeable <code>/tmp</code> directory.</td>
</tr>
<tr>
<td><code>kubernetes.ingressClass</code></td>
<td><code>azure/application-gateway</code></td>
<td>Specify a <a href="../features/custom-ingress-class/">custom ingress class</a> which will be used to match <code>kubernetes.io/ingress.class</code> in ingress manifest</td>
</tr>
<tr>
<td><code>rbac.enabled</code></td>
<td>false</td>
<td>Specify true if kubernetes cluster is rbac enabled</td>
</tr>
<tr>
<td><code>armAuth.type</code></td>
<td></td>
<td>could be <code>aadPodIdentity</code> or <code>servicePrincipal</code></td>
</tr>
<tr>
<td><code>armAuth.identityResourceID</code></td>
<td></td>
<td>Resource ID of the Azure Managed Identity</td>
</tr>
<tr>
<td><code>armAuth.identityClientId</code></td>
<td></td>
<td>The Client ID of the Identity. See below for more information on Identity</td>
</tr>
<tr>
<td><code>armAuth.secretJSON</code></td>
<td></td>
<td>Only needed when Service Principal Secret type is chosen (when <code>armAuth.type</code> has been set to <code>servicePrincipal</code>)</td>
</tr>
<tr>
<td><code>nodeSelector</code></td>
<td><code>{}</code></td>
<td>(Legacy: use <code>kubernetes.nodeSelector</code> instead) Scheduling node selector</td>
</tr>
</tbody>
</table>
<h2 id="example">Example</h2>
<p>```yaml
appgw:
    applicationGatewayID: <application-gateway-resource-id>
    environment: "AZUREUSGOVERNMENTCLOUD" # default: AZUREPUBLICCLOUD</p>
<p>armAuth:
    type: aadPodIdentity
    identityResourceID: <identityResourceId>
    identityClientID:  <identityClientId></p>
<p>kubernetes:
  nodeSelector: {}
  tolerations: []
  affinity: {}</p>
<p>rbac:
    enabled: false
```</p>
<h3 id="run-without-root">Run without root</h3>
<p>By default, AGIC will assume <code>root</code> permission which allows it to read <code>cloud-provider</code> config and get meta-data information about the cluster.
If you want AGIC to run without <code>root</code> access, then make sure that AGIC is installed with at least the following information to run successfully:</p>
<p>```yaml
appgw:
    applicationGatewayID: <application-gateway-resource-id>
    # OR
    subscriptionId: <subscription-id>
    resourceGroup: <resource-group-name>
    name: <application-gateway-name></p>
<p>kubernetes:
    securityContext:
        runAsUser: 1000 # appgw-ingress-user
```</p>
<blockquote>
<p><strong>Note:</strong> AGIC also uses <code>cloud-provider</code> config to get Node's Virtual Network Name / Subscription and Route table name. If AGIC is not able to reach this information,  It will skip assigning the Node's route table to Application Gateway's subnet which is required when using <code>kubenet</code> network plugin. To workaround, this assignment can be performed manually.</p>
</blockquote>
<h3 id="run-with-read-only-root-filesystem">Run with read-only root filesystem</h3>
<p>To run AGIC with <code>readOnlyRootFilesystem</code>, the following additional configuration items are required:</p>
<p><code>yaml
kubernetes:
    containerSecurityContext:
        readOnlyRootFilesystem: true
    volumes:
        extraVolumes:
        - name: tmp
          emptyDir: {}
        extraVolumeMounts:
        - name: tmp
          mountPath: /tmp</code></p>
<blockquote>
<p><strong>Note:</strong> AGIC needs to be able to write to the <code>/tmp</code> directory.</p>
</blockquote>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../annotations/" class="btn btn-neutral float-left" title="Annotations"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ingress-v1/" class="btn btn-neutral float-right" title="Ingress V1 Support">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Azure/application-gateway-kubernetes-ingress" class="fa fa-code-fork" style="color: #fcfcfc"> Azure/application-gateway-kubernetes-ingress</a>
        </span>
    
    
      <span><a href="../annotations/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ingress-v1/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
